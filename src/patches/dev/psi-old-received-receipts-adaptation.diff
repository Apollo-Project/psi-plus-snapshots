--- psi.orig/iris/src/xmpp/xmpp-im/types.cpp
+++ psi/iris/src/xmpp/xmpp-im/types.cpp
@@ -1897,6 +1897,8 @@ bool Message::fromStanza(const Stanza &s
 	if(!t.isNull()) {
 		d->messageReceipt = ReceiptReceived;
 		d->messageReceiptId = t.attribute("id");
+		if (d->messageReceiptId.isEmpty())
+			d->messageReceiptId = id();
 	}

 	// xsigned
